(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/im.13de04a2.gif"},15:function(e,t,a){e.exports=a.p+"static/media/progr.dc665344.gif"},21:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(2),c=a.n(s),o=(a(27),a(20)),i=a(10),l=a.n(i),m=a(19),u=a(13),d=a(4),h=a(5),f=a(7),v=a(6),p=a(8),g=(a(29),a(30),a(14)),E=a.n(g),y=a(15),b=a.n(y),w=a(16),N=a(9),k=(a(31),function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("yo");var t=0,a=[];this.paused=!1;var n=function(){var a=new Image;a.style.position="absolute",a.style.zIndex=-1,a.style.left="0",a.onload=r,a.onclick=s,a.src="http://zeroc.local:9000/?action=snapshot&n="+ ++t;var n=e.div;try{n.insertBefore(a,n.firstChild)}catch(c){}};function r(){for(this.style.zIndex=t;1<a.length;){var e=a.shift();e.parentNode.removeChild(e)}a.push(this),this.paused||n()}function s(){this.paused=!this.paused,this.paused||n()}n()}},{key:"componentDidUnMount",value:function(){this.paused=!0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:500},ref:function(t){return e.div=t}})}}]),t}(n.Component));function C(e){for(var t="",a=0;a<e.byteLength;a++){var n=e.getUint8(a);t+=String.fromCharCode(n)}return t}document.addEventListener("deviceready",function(){console.log("device ready"),console.log("window: ",window)},!1);var O=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={connected:!1,recording:!1,stream:!1,videos:[]},e.linkpre="http://zeroc.local:3000/",e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"begin",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a,n,r,s,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={filters:[{name:"zeroc"}],optionalServices:["17283985-3729-0129-3487-120938478700"]},e.prev=1,e.next=4,navigator.bluetooth.requestDevice(t);case 4:return a=e.sent,console.log("device: ",a),e.next=8,a.gatt.connect();case 8:return n=e.sent,console.log("gatt: ",n),e.next=12,n.getPrimaryService("17283985-3729-0129-3487-120938478700");case 12:return r=e.sent,console.log("primaryService: ",r),e.next=16,r.getCharacteristic("17283985-3729-0129-3487-120938478701");case 16:return s=e.sent,console.log("videoChar: ",s),s.readValue().then(function(e){console.log("v: ",e);var t=C(e);console.log("str: ",t),c.setState({videos:JSON.parse(t)})}).catch(function(e){console.warn("ERROR",e,e.message),Object(N.b)(e.message)}),e.next=21,s.startNotifications();case 21:s.addEventListener("characteristicvaluechanged",function(e){window.asdf=e;for(var t=e.target.value,a="",n=0;n<t.byteLength;n++){var r=t.getUint8(n);a+=String.fromCharCode(r)}var s=JSON.parse(a);console.log("obj: ",s),"streamstart"==s.type?c.setState({stream:!0}):"streamstop"==s.type?c.setState({stream:!1}):"recfinish"==s.type?c.setState({recording:!1,encoding:!0}):"recstart"==s.type?c.setState({recording:!0}):"videofinish"==s.type?c.setState({recording:!1,encoding:!1,videos:[].concat(Object(m.a)(c.state.videos),[s])}):"error"==s.type&&Object(N.b)(JSON.stringify(s.err)),console.log("str: ",a)}),this.setState({connected:!0}),this.videoChar=s,e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.error("error: ",e.t0),console.error("error message: ",e.t0.message);case 30:case"end":return e.stop()}},e,this,[[1,26]])}));return function(){return e.apply(this,arguments)}}()},{key:"startRec",value:function(){var e=Uint8Array.of(1);return this.videoChar.writeValue(e)}},{key:"stopRec",value:function(){var e=Uint8Array.of(0);return this.videoChar.writeValue(e)}},{key:"startStream",value:function(){var e=Uint8Array.of(2);return this.videoChar.writeValue(e)}},{key:"stopStream",value:function(){var e=Uint8Array.of(3);return this.videoChar.writeValue(e)}},{key:"render",value:function(){var e=this;console.log("this.state.videos: ",this.state.videos);var t=this.state.videos.map(function(e){return Object(o.a)({},e,{date:w.DateTime.fromISO(e.date)})});return t=(t=t.reverse()).sort(function(e,t){return parseInt(t.name.split("."))-parseInt(e.name.split("."))}),r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("p",null,r.a.createElement("h1",{className:"is-title is-large has-text-white"},"ZEROC")),!this.state.connected&&r.a.createElement("a",{onClick:function(){e.begin()},className:"button is-large is-fullwidth"},"connect"),this.state.connected&&r.a.createElement(r.a.Fragment,null,!this.state.stream&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){e.startStream()},className:"button is-large is-fullwidth"},"start stream"),r.a.createElement("a",{onClick:function(){e.startRec()},className:"button is-large is-fullwidth"},"start!"),r.a.createElement("a",{onClick:function(){e.stopRec()},className:"button is-large is-fullwidth"},"stop!")),this.state.stream&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){e.stopStream()},className:"button is-large is-fullwidth"},"Stop stream"),r.a.createElement(k,null))),this.state.recording&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:E.a})),this.state.encoding&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:b.a})))),!this.state.encoding&&r.a.createElement("div",{className:"container"},t.map(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:t.name,className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},t.name),r.a.createElement("a",{href:"#",className:"card-header-icon","aria-label":"more options"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("video",{poster:e.linkpre+t.name.replace(".mp4",".jpg"),controls:!0},r.a.createElement("source",{src:e.linkpre+t.name,type:"video/mp4"}),r.a.createElement("br",null)))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:e.linkpre+t.name,className:"card-footer-item"},"Download"),r.a.createElement("a",{href:"#",className:"card-footer-item"},"--"),r.a.createElement("a",{href:"#",className:"card-footer-item"},"--"))),r.a.createElement("br",null))})),r.a.createElement(N.a,null))}}]),t}(n.Component);c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.0a91982f.chunk.js.map